{"version":3,"sources":["webpack:///./resources/js/Pages/Billing/VerifyPayment.vue?d5fd","webpack:///resources/js/Pages/Billing/VerifyPayment.vue","webpack:///./resources/js/Pages/Billing/VerifyPayment.vue?58ab","webpack:///./resources/js/Pages/Billing/VerifyPayment.vue"],"names":["props","components","AppLayout","data","name","cardElement","paymentProcessing","paymentProcessed","requiresPaymentMethod","this","payment","requires_payment_method","requiresAction","requires_action","requiresConfirmation","requires_confirmation","errorMessage","mounted","script","src","document","querySelector","appendChild","onload","window","Stripe","methods","addPaymentMethod","confirmPaymentMethod","requestPaymentMethod","configureStripe","elements","create","hidePostalCode","mount","_vm","_h","$createElement","_c","_self","staticClass","ref","_v","attrs","_e","directives","rawName","value","expression","_s","amount","model","callback","$$v","on"],"mappings":"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","file":"js/105.8d1aa5c9166a6fbf0ee2.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('app-layout',[_c('div',{staticClass:\"column is-7-tablet is-6-desktop is-5-widescreen\"},[_c('form',{ref:\"form\",staticClass:\"box register-form\"},[(_vm.payment.is_cancelled)?_c('div',[_c('h3',{staticClass:\"title has-text-centered\"},[_vm._v(\"Payment Cancelled \"),_c('span',{staticClass:\"emoji\"},[_vm._v(\"ðŸš¦\")])]),_vm._v(\" \"),_c('p',{staticClass:\"subtitle has-text-centered\"},[_vm._v(\"This payment was cancelled.\")]),_vm._v(\" \"),_c('p',[_vm._v(\"The transaction has been cancelled, no payment has been taken.\")]),_vm._v(\" \"),_c('p',[_vm._v(\"If you did not intend to cancel the payment, please try again from the beginning.\")])]):_c('div',[_c('h3',{staticClass:\"title has-text-centered\"},[_vm._v(\"Verifica necessaria \"),_c('span',{staticClass:\"emoji\"},[_vm._v(\"ðŸš¦\")])]),_vm._v(\" \"),_c('p',{staticClass:\"subtitle has-text-centered\"},[_vm._v(\"Please verify your payment\")]),_vm._v(\" \"),(_vm.errorMessage)?_c('b-notification',{attrs:{\"type\":\"is-danger\",\"has-icon\":\"\",\"role\":\"alert\",\"closable\":false,\"message\":_vm.errorMessage}}):_vm._e(),_vm._v(\" \"),(!_vm.paymentProcessed)?_c('div',{attrs:{\"id\":\"payment-elements\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.requiresPaymentMethod),expression:\"requiresPaymentMethod\"}]},[_c('p',[_vm._v(\"We were unable to process your payment of \"+_vm._s(_vm.payment.amount)+\". Please try again.\")]),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":\"Cardholder name\"}},[_c('b-input',{attrs:{\"id\":\"cardholder-name\",\"required\":\"\",\"type\":\"text\"},model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:\"name\"}})],1),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":\"Card details\"}},[_c('div',{attrs:{\"id\":\"card-element\"}})]),_vm._v(\" \"),_c('button',{staticClass:\"button is-primary\",attrs:{\"id\":\"card-button\",\"disabled\":_vm.paymentProcessing},on:{\"click\":_vm.addPaymentMethod}},[_vm._v(\"\\n                Pay now\\n              \")])],1),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.requiresAction || _vm.requiresConfirmation),expression:\"requiresAction || requiresConfirmation\"}]},[_c('p',[_vm._v(\"You are about to make a payment of \"+_vm._s(_vm.payment.amount)+\", click the button below to proceed. You may be prompted for additional verification for security purposes.\")]),_vm._v(\" \"),_c('button',{staticClass:\"button is-primary is-fullwidth mt-4\",attrs:{\"id\":\"card-button\",\"disabled\":_vm.paymentProcessing},on:{\"click\":_vm.confirmPaymentMethod}},[_vm._v(\"\\n                Confirm payment\\n              \")])])]):_vm._e()],1)])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<app-layout>\n  <div class=\"column is-7-tablet is-6-desktop is-5-widescreen\">\n\n    <form ref=\"form\" class=\"box register-form\">\n\n      <div v-if=\"payment.is_cancelled\">\n        <h3 class=\"title has-text-centered\">Payment Cancelled <span class=\"emoji\">ðŸš¦</span></h3>\n        <p class=\"subtitle has-text-centered\">This payment was cancelled.</p>\n\n        <p>The transaction has been cancelled, no payment has been taken.</p>\n        <p>If you did not intend to cancel the payment, please try again from the beginning.</p>\n\n      </div>\n\n      <div v-else>\n        <h3 class=\"title has-text-centered\">Verifica necessaria <span class=\"emoji\">ðŸš¦</span></h3>\n        <p class=\"subtitle has-text-centered\">Please verify your payment</p>\n\n        <b-notification\n          v-if=\"errorMessage\"\n          type=\"is-danger\"\n          has-icon\n          role=\"alert\"\n          :closable=\"false\"\n          :message=\"errorMessage\">\n        </b-notification>\n\n        <div v-if=\"!paymentProcessed\" id=\"payment-elements\">\n\n            <div v-show=\"requiresPaymentMethod\">\n\n              <p>We were unable to process your payment of {{ payment.amount}}. Please try again.</p>\n\n              <hr>\n\n              <b-field label=\"Cardholder name\">\n                <b-input id=\"cardholder-name\" required v-model=\"name\" type=\"text\">\n                </b-input>\n              </b-field>\n\n              <b-field label=\"Card details\">\n                <div id=\"card-element\"></div>\n              </b-field>\n\n              <button\n                class=\"button is-primary\"\n                id=\"card-button\"\n                @click=\"addPaymentMethod\"\n                :disabled=\"paymentProcessing\">\n                Pay now\n              </button>\n            </div>\n\n            <div v-show=\"requiresAction || requiresConfirmation\">\n\n              <p>You are about to make a payment of {{ payment.amount}}, click the button below to proceed. You may be prompted for additional verification for security purposes.</p>\n\n              <button\n                class=\"button is-primary is-fullwidth mt-4\"\n                id=\"card-button\"\n                @click=\"confirmPaymentMethod\"\n                :disabled=\"paymentProcessing\">\n                Confirm payment\n              </button>\n            </div>\n        </div>\n\n      </div>\n\n    </form>\n\n\n  </div>\n</app-layout>\n</template>\n\n<script>\nimport { Inertia } from '@inertiajs/inertia'\nimport AppLayout from '@/Layouts/AppLayout'\n\nexport default {\n  props: ['stripe_public_key', 'payment', 'stripe_authentication_failure_code', '$parameters'],\n  components: {\n    AppLayout,\n  },\n  data() {\n    return {\n      name: '',\n      cardElement: null,\n      paymentProcessing: false,\n      paymentProcessed: false,\n      requiresPaymentMethod: this.payment.requires_payment_method,\n      requiresAction: this.payment.requires_action,\n      requiresConfirmation: this.payment.requires_confirmation,\n      errorMessage: ''\n    }\n  },\n  mounted() {\n    const script = document.createElement('script');\n    script.src = 'https://js.stripe.com/v3';\n    document.querySelector('head').appendChild(script);\n    script.onload = () => {\n      window.Stripe = Stripe(this.stripe_public_key);\n      if(!this.payment.is_succeeded && !this.payment.is_cancelled && !this.payment.requires_action) {\n        this.configureStripe();\n      }\n    };\n  },\n  methods: {\n    addPaymentMethod: function () {\n       var self = this;\n       this.paymentProcessing = true;\n       this.paymentProcessed = false;\n       this.errorMessage = '';\n       Stripe.confirmCardPayment(\n           self.payment.client_secret, {\n               payment_method: {\n                   card: self.cardElement,\n                   billing_details: {\n                     name: self.name\n                   }\n               }\n           }\n       ).then(function (result) {\n           self.paymentProcessing = false;\n           if (result.error) {\n               if (result.error.code === self.stripe_authentication_failure_code &&\n                   result.error.param === 'payment_method_data[billing_details][name]') {\n                   self.errorMessage = 'Please provide your name.';\n               } else {\n                   self.errorMessage = result.error.message;\n               }\n           } else {\n               Inertia.visit(route('billing.success'));\n           }\n       });\n    },\n    confirmPaymentMethod: function () {\n       var self = this;\n       this.paymentProcessing = true;\n       this.paymentProcessed = false;\n       this.errorMessage = '';\n       Stripe.confirmCardPayment(\n         self.payment.client_secret, {\n           payment_method: self.payment.payment_method\n         }\n       ).then(function (result) {\n         self.paymentProcessing = false;\n         if (result.error) {\n             self.errorMessage = result.error.message;\n             if (result.error.code === self.stripe_authentication_failure_code) {\n                 self.requestPaymentMethod();\n             }\n         } else {\n            Inertia.visit(route('billing.success'));\n         }\n       });\n    },\n    requestPaymentMethod: function () {\n       this.configureStripe();\n       this.requiresPaymentMethod = true;\n       this.requiresAction = false;\n    },\n    configureStripe: function () {\n      const elements = Stripe.elements();\n      this.cardElement = elements.create('card', {\n        hidePostalCode: false\n      });\n      this.cardElement.mount('#card-element');\n    },\n  },\n\n}\n</script>\n\n<style lang=\"scss\">\n\n</style>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VerifyPayment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VerifyPayment.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VerifyPayment.vue?vue&type=template&id=12a63296&\"\nimport script from \"./VerifyPayment.vue?vue&type=script&lang=js&\"\nexport * from \"./VerifyPayment.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}