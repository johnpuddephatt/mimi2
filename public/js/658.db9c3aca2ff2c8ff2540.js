(self.webpackChunk=self.webpackChunk||[]).push([[658],{623:(e,n,t)=>{"use strict";t.d(n,{Z:()=>a});var s=t(4015),r=t.n(s),o=t(3645),i=t.n(o)()(r());i.push([e.id,".collapse{border-bottom:1px solid #ededed}","",{version:3,sources:["webpack://./resources/js/Pages/Admin/Course/Form.vue"],names:[],mappings:"AA0MA,UACE,+BAxMF",sourcesContent:['\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@import "../../../../sass/variables";\n\n.collapse {\n  border-bottom: 1px solid $grey-lightest;\n}\n'],sourceRoot:""}]);const a=i},1658:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,s)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}const i={props:["errors","data","$parameters"],components:{},data:function(){var e,n,t,s,r,o,i,a;return{form:this.$inertia.form({id:null!==(e=null===(n=this.data)||void 0===n?void 0:n.id)&&void 0!==e?e:null,title:null!==(t=null===(s=this.data)||void 0===s?void 0:s.title)&&void 0!==t?t:null,description:null!==(r=null===(o=this.data)||void 0===o?void 0:o.description)&&void 0!==r?r:null,archived:null!==(i=null===(a=this.data)||void 0===a?void 0:a.archived)&&void 0!==i&&i}),destroyWeekForm:this.$inertia.form(),destroyLessonForm:this.$inertia.form(),isOpen:null}},mounted:function(){},methods:{confirmLessonDelete:function(e,n){var t=this;this.$buefy.dialog.confirm({type:"is-danger",hasIcon:!0,title:"Confirm lesson deletion",message:"<strong>Are you sure you want to delete this lesson?</strong>",onConfirm:function(){return t.destroyLessonForm.transform((function(e){return{_method:"DELETE"}})).post(route("lesson.delete",{week:e,lesson:n,course:t.$parameters.course}),{preserveScroll:!0,onSuccess:function(){t.successToast("Week deleted")},onError:function(e){t.errorToast("Could not delete week.")}})}})},confirmWeekDelete:function(e){var n=this;this.$buefy.dialog.confirm({title:"Confirm week deletion",type:"is-danger",hasIcon:!0,message:"Are you sure you want to delete this week?<br> <strong>This will also delete any lessons within this week.</strong>",onConfirm:function(){return n.destroyWeekForm.delete(route("week.delete",{week:e,course:n.$parameters.course}),{preserveScroll:!0,onSuccess:function(){n.successToast("Week deleted")},onError:function(e){n.errorToast("Could not delete week.")}})}})},onSubmit:function(){var e=this,n=this.data?route("course.update",{course:this.$parameters.course}):route("course.create");this.form.transform((function(n){return r(r({},n),{},{course_id:e.$parameters.course,_method:e.data?"PUT":"POST"})})).post(n,{preserveScroll:!0,onSuccess:function(){e.successToast("Course saved")},onError:function(n){e.errorToast("Check the form for errors")}})}}};var a=t(3379),l=t.n(a),c=t(623),u={insert:"head",singleton:!1};l()(c.Z,u);c.Z.locals;const d=(0,t(1900).Z)(i,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("app-layout",[t("div",{staticClass:"column is-7-tablet is-6-desktop is-5-widescreen"},[t("inertia-link",{staticClass:"back-link has-text-dark",attrs:{href:e.route("courses.manage")}},[e._v("← Back to admin")]),e._v(" "),t("div",{staticClass:"box"},[t("h3",{staticClass:"title has-text-centered"},[e._v(e._s(e.data?"Modifica":"Creare")+" corso "),t("span",{staticClass:"emoji"},[e._v("✏️")])]),e._v(" "),t("p",{staticClass:"subtitle has-text-centered"},[e._v(e._s(e.data?"Edit the":"Set up a new")+" course below")]),e._v(" "),e.errors.course?t("b-notification",{attrs:{type:"is-danger","has-icon":"",role:"alert",closable:!1,message:e.errors.course[0]}}):e._e(),e._v(" "),t("b-field",{attrs:{label:"Title",message:e.errors.title,type:e.errors.title?"is-danger":null}},[t("b-input",{attrs:{required:"",name:"title",placeholder:"Enter the title for this course"},model:{value:e.form.title,callback:function(n){e.$set(e.form,"title",n)},expression:"form.title"}})],1),e._v(" "),t("b-field",{attrs:{label:"Description",message:e.errors.description,type:e.errors.description?"is-danger":null}},[t("b-input",{attrs:{name:"description",type:"textarea",rows:"6",placeholder:"Give a description of this course"},model:{value:e.form.description,callback:function(n){e.$set(e.form,"description",n)},expression:"form.description"}})],1),e._v(" "),t("div",{staticClass:"is-flex is-justify-content-space-between is-align-items-center mb-2"},[t("h3",{staticClass:"label"},[e._v("Lessons")]),e._v(" "),e.$parameters.course?t("inertia-link",{staticClass:"button is-primary",attrs:{href:e.route("week.create",{course:e.$parameters.course})}},[e._v("\n          Add new week")]):e._e()],1),e._v(" "),e.$parameters.course?t("nav",{staticClass:"mb-6"},[e._l(e.data.weeks,(function(n,s){return t("b-collapse",{key:s,staticClass:"collapse",attrs:{animation:"slide",open:e.isOpen==s},on:{open:function(n){e.isOpen=s}},scopedSlots:e._u([{key:"trigger",fn:function(s){return[t("div",{staticClass:"is-size-6 p-1 pl-2 is-align-items-center is-flex",class:s.open?"":"is-radius",attrs:{role:"button"}},[t("b-icon",{staticClass:"mr-2",attrs:{icon:s.open?"menu-down":"menu-right"}}),e._v(" "),t("span",{staticClass:"tag is-white mr-2 has-text-weight-normal"},[e._v(e._s(n.number))]),e._v(" "),t("span",{staticClass:"text-overflow-ellipsis"},[e._v(e._s(n.name))]),e._v(" "),t("span",{staticClass:"is-size-7 ml-2 mr-2 has-text-weight-normal"},[e._v("\n                  "+e._s(n.lessons.length||"No")+" lessons\n                ")]),e._v(" "),t("div",{staticClass:"ml-a has-text-weight-normal"},[t("inertia-link",{staticClass:"button is-small is-link is-outlined",attrs:{href:e.route("lesson.create",{course:e.$parameters.course,week:n.number})},on:{click:function(e){e.stopPropagation()}}},[e._v("Add lesson")]),e._v(" "),t("b-dropdown",{attrs:{position:"is-bottom-left","append-to-body":"","aria-role":"menu"},nativeOn:{click:function(e){e.stopPropagation()}},scopedSlots:e._u([{key:"trigger",fn:function(){return[t("b-button",{staticClass:"is-small"},[t("b-icon",{attrs:{icon:"cog",size:"is-small"}})],1)]},proxy:!0}],null,!0)},[e._v(" "),t("b-dropdown-item",{attrs:{"has-link":"","aria-role":"menuitem"}},[t("inertia-link",{attrs:{href:e.route("week.edit",{course:e.$parameters.course,week:n.number})},on:{click:function(e){e.stopPropagation()}}},[e._v("Edit")])],1),e._v(" "),t("b-dropdown-item",{attrs:{"has-link":"","aria-role":"menuitem"}},[t("a",{attrs:{href:"#",role:"button"},on:{click:function(t){return t.stopPropagation(),e.confirmWeekDelete(n.number)}}},[e._v("Delete")])])],1)],1)],1)]}}],null,!0)},[e._v(" "),n.lessons.length?e._e():t("div",{staticClass:"notification has-background-white mb-0 is-size-7 has-text-centered"},[e._v("\n              No lessons in this week. "),t("inertia-link",{attrs:{href:e.route("lesson.create",{course:e.$parameters.course,week:n.number})}},[e._v("Add the first")]),e._v(".\n            ")],1),e._v(" "),e._l(n.lessons,(function(s){return t("div",{key:s.id,staticClass:"panel-block is-justify-between"},[t("span",{staticClass:"text-overflow-ellipsis"},[e._v(e._s(s.title))]),e._v(" "),t("div",{staticClass:"is-size-7 ml-2"},[t("inertia-link",{staticClass:"button has-text-grey is-small",attrs:{href:e.route("lesson.edit",{course:e.$parameters.course,week:n.number,lesson:s.id})}},[e._v("Edit")]),e._v(" "),t("button",{staticClass:"button has-text-grey is-small",on:{click:function(t){return e.confirmLessonDelete(n.number,s.id)}}},[e._v("Delete")])],1)])}))],2)})),e._v(" "),e.data.weeks?e._e():t("section",{staticClass:"section is-medium has-background-light has-text-centered"},[e._v("\n          Start by "),t("inertia-link",{attrs:{href:e.route("week.create",{course:e.$parameters.course})}},[e._v("adding a week")])],1)],2):t("div",{staticClass:"notification is-size-7"},[e._v("\n        You need to save this course before adding lessons.\n      ")]),e._v(" "),e.data?t("b-checkbox",{model:{value:e.form.archived,callback:function(n){e.$set(e.form,"archived",n)},expression:"form.archived"}},[e._v("Archive this course?")]):e._e(),e._v(" "),t("hr"),e._v(" "),t("b-button",{attrs:{type:"is-primary",disabled:!e.form.title,loading:e.form.processing,expanded:""},on:{click:function(n){return n.preventDefault(),e.onSubmit(n)}}},[e._v(e._s(e.data?"Update":"Create"))])],1)],1)])}),[],!1,null,null,null).exports}}]);
//# sourceMappingURL=658.db9c3aca2ff2c8ff2540.js.map