{"version":3,"sources":["webpack:///./resources/js/Pages/Admin/Cohort/Form.vue?9127","webpack:///resources/js/components/CourseUsers.vue","webpack:///./resources/js/components/CourseUsers.vue?2481","webpack:///./resources/js/components/CourseUsers.vue","webpack:///./resources/js/components/CourseUsers.vue?4e37","webpack:///resources/js/Pages/Admin/Cohort/Form.vue","webpack:///./resources/js/Pages/Admin/Cohort/Form.vue?c861","webpack:///./resources/js/Pages/Admin/Cohort/Form.vue"],"names":["platform","props","data","isLoaded","isSaving","errorLoading","newUsers","errors","enrolledUsers","users","filteredUsers","this","mounted","axios","method","url","route","timeout","watch","methods","getFilteredUsers","filter","enrollSelected","map","onUnenroll","cohort","cohort_id","user","user_id","displayErrorNotification","$buefy","snackbar","open","message","type","position","duration","_vm","_h","$createElement","_c","_self","staticClass","_v","attrs","on","scopedSlots","_u","key","fn","_s","option","first_name","last_name","email","model","value","callback","$$v","expression","_e","_l","id","$event","components","TipTap","CourseUsers","form","$inertia","title","enable_chatroom","enables_companion_courses","active","companion","enables_speaking_club_access","onSubmit","_method","course","$page","parameters","$set","domProps","hash","processing","preventDefault"],"mappings":"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","file":"js/921.2c72bf5f9a4c0f5e9df1.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('app-layout',[_c('div',{staticClass:\"columns is-centered\"},[_c('div',{staticClass:\"column is-7-tablet is-6-desktop is-5-widescreen\"},[_c('inertia-link',{staticClass:\"back-link has-text-dark\",attrs:{\"href\":_vm.route('course.edit', { course: _vm.$page.props.parameters.course })}},[_vm._v(\"← Back to course\")]),_vm._v(\" \"),_c('div',{staticClass:\"box\"},[_c('h3',{staticClass:\"title has-text-centered\"},[_vm._v(\"\\n          \"+_vm._s(_vm.data ? \"Modifica\" : \"Creare\")+\" classi\\n          \"),_c('span',{staticClass:\"emoji\"},[_vm._v(\"✏️\")])]),_vm._v(\" \"),_c('p',{staticClass:\"subtitle has-text-centered\"},[_vm._v(\"\\n          \"+_vm._s(_vm.data ? \"Edit the\" : \"Set up a new\")+\" class below\\n        \")]),_vm._v(\" \"),(_vm.errors.course)?_c('b-notification',{attrs:{\"type\":\"is-danger\",\"has-icon\":\"\",\"role\":\"alert\",\"closable\":false,\"message\":_vm.errors.course[0]}}):_vm._e(),_vm._v(\" \"),_c('b-tabs',[_c('b-tab-item',{attrs:{\"label\":\"Overview\"}},[_c('b-field',{attrs:{\"label\":\"Title\",\"message\":_vm.errors.title,\"type\":_vm.errors.title ? 'is-danger' : null}},[_c('b-input',{attrs:{\"required\":\"\",\"name\":\"title\",\"placeholder\":\"Enter the name for this class\"},model:{value:(_vm.form.title),callback:function ($$v) {_vm.$set(_vm.form, \"title\", $$v)},expression:\"form.title\"}})],1),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('b-checkbox',{model:{value:(_vm.form.enable_chatroom),callback:function ($$v) {_vm.$set(_vm.form, \"enable_chatroom\", $$v)},expression:\"form.enable_chatroom\"}},[_vm._v(\"Enable chatroom?\")]),_vm._v(\" \"),_c('p',{staticClass:\"is-size-7 mb-2\"},[_vm._v(\"\\n              When \"),_c('strong',[_vm._v(\"disabled\")]),_vm._v(\", chatrooms will not be displayed\\n              within this class.\\n            \")]),_vm._v(\" \"),_c('b-checkbox',{model:{value:(_vm.form.active),callback:function ($$v) {_vm.$set(_vm.form, \"active\", $$v)},expression:\"form.active\"}},[_vm._v(\"Active?\")]),_vm._v(\" \"),_c('p',{staticClass:\"is-size-7 mb-2\"},[_vm._v(\"\\n              When \"),_c('strong',[_vm._v(\"enabled\")]),_vm._v(\", this class will be listed in\\n              students’ active classes and students will be able to post new\\n              chatroom replies.\"),_c('br'),_vm._v(\"\\n              When \"),_c('strong',[_vm._v(\"disabled\")]),_vm._v(\", students will no longer be able\\n              to post new chatroom replies. They will also lose access to\\n              speaking club and companion classes, even if these options are\\n              enabled below.\\n            \")]),_vm._v(\" \"),_c('b-checkbox',{model:{value:(_vm.form.enables_companion_courses),callback:function ($$v) {_vm.$set(_vm.form, \"enables_companion_courses\", $$v)},expression:\"form.enables_companion_courses\"}},[_vm._v(\"Enables access to companion classes?\")]),_vm._v(\" \"),_c('p',{staticClass:\"is-size-7 mb-2\"},[_vm._v(\"\\n              When \"),_c('strong',[_vm._v(\"enabled\")]),_vm._v(\", students enrolled in this class\\n              will be able to access companion classes while this class is\\n              active.\\n            \")]),_vm._v(\" \"),_c('b-checkbox',{model:{value:(_vm.form.companion),callback:function ($$v) {_vm.$set(_vm.form, \"companion\", $$v)},expression:\"form.companion\"}},[_vm._v(\"Companion class?\")]),_vm._v(\" \"),_c('p',{staticClass:\"is-size-7 mb-2\"},[_vm._v(\"\\n              When \"),_c('strong',[_vm._v(\"enabled\")]),_vm._v(\", this class will be accessible by\\n              all students enrolled in an active class that includes access to\\n              companion courses.\\n            \")]),_vm._v(\" \"),_c('b-checkbox',{model:{value:(_vm.form.enables_speaking_club_access),callback:function ($$v) {_vm.$set(_vm.form, \"enables_speaking_club_access\", $$v)},expression:\"form.enables_speaking_club_access\"}},[_vm._v(\"Includes access to speaking club?\")]),_vm._v(\" \"),_c('p',{staticClass:\"is-size-7 mb-2\"},[_vm._v(\"\\n              When \"),_c('strong',[_vm._v(\"enabled\")]),_vm._v(\", students enrolled on this class\\n              will be able to access speaking club.\\n              \"),_c('em',[_vm._v(\"This is only in effect while this class is active.\")])])],1),_vm._v(\" \"),(_vm.$page.props.parameters.cohort)?_c('b-tab-item',{attrs:{\"label\":\"Students\"}},[_c('course-users',{attrs:{\"cohort_id\":_vm.$page.props.parameters.cohort}}),_vm._v(\" \"),_c('div',{staticClass:\"notification has-background-light\"},[_c('h3',[_vm._v(\"Invite people\")]),_vm._v(\" \"),_c('p',{staticClass:\"is-size-7\"},[_vm._v(\"\\n                Share the link below with people to invite them to this class.\\n                If they don’t already have an account they'll be prompted to\\n                create one.\\n              \")]),_vm._v(\" \"),_c('input',{staticClass:\"input is-small\",attrs:{\"id\":\"course-invite-link\",\"type\":\"text\"},domProps:{\"value\":_vm.route('cohort.enrollCurrentUser', { cohort: _vm.data.hash })}})])],1):_vm._e()],1),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('b-button',{attrs:{\"type\":\"is-primary\",\"disabled\":!_vm.form.title,\"loading\":_vm.form.processing,\"expanded\":\"\"},on:{\"click\":function($event){$event.preventDefault();return _vm.onSubmit($event)}}},[_vm._v(_vm._s(_vm.data ? \"Update\" : \"Create\"))])],1)],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"user-list\">\n    <div class=\"notification is-danger\" v-if=\"errorLoading\">\n      An error occured while trying to load users\n    </div>\n\n    <div v-else-if=\"isLoaded\">\n      <b-field v-if=\"users\" class=\"mt-4 mb-4\">\n        <b-taginput\n          v-model=\"newUsers\"\n          :open-on-focus=\"true\"\n          :data=\"filteredUsers\"\n          ellipsis\n          expanded\n          autocomplete\n          :allow-new=\"false\"\n          placeholder=\"Add a person\"\n          field=\"first_name\"\n          @typing=\"getFilteredUsers\"\n        >\n          <template slot-scope=\"props\">\n            <div>\n              {{ props.option.first_name }} {{ props.option.last_name }}\n            </div>\n            <div class=\"is-size-7\">{{ props.option.email }}</div>\n          </template>\n        </b-taginput>\n        <p class=\"control\">\n          <b-button @click=\"enrollSelected\">Save</b-button>\n        </p>\n      </b-field>\n\n      <div\n        class=\"panel-block is-justify-between mb-4\"\n        v-for=\"user in enrolledUsers\"\n        :key=\"user.id\"\n      >\n        <div>\n          <p>{{ user.first_name }} {{ user.last_name }}</p>\n          <p class=\"is-size-7\">{{ user.email }}</p>\n        </div>\n        <button class=\"button is-small\" @click=\"onUnenroll(user.id)\">\n          Unenroll\n        </button>\n      </div>\n    </div>\n\n    <b-loading v-else :is-full-page=\"false\" :active=\"!isLoaded\"></b-loading>\n  </div>\n</template>\n\n<script>\nvar platform = require(\"platform\");\n\nexport default {\n  props: [\"cohort_id\"],\n  data() {\n    return {\n      isLoaded: false,\n      isSaving: false,\n      errorLoading: false,\n      newUsers: [],\n      errors: \"\",\n      enrolledUsers: [],\n      users: [],\n      filteredUsers: this.users\n    };\n  },\n\n  mounted() {\n    axios({\n      method: \"get\",\n      url: route(\"cohort.users\", { cohort: this.cohort_id }),\n      timeout: 15000\n    })\n      .then(response => {\n        this.enrolledUsers = response.data;\n        this.isLoaded = true;\n      })\n      .catch(error => {\n        this.errorLoading = true;\n        axios.post(\"/log\", {\n          error: `COHORT ENROLLED USERS GET ERROR, ${\n            platform.description\n          }, ${JSON.stringify(error)}`\n        });\n      }),\n      axios({\n        method: \"get\",\n        url: `/users`\n      })\n        .then(response => {\n          this.users = response.data;\n        })\n        .catch(error => {\n          this.errorLoading = true;\n          axios.post(\"/log\", {\n            error: `COHORT USERS GET ERROR, ${\n              platform.description\n            }, ${JSON.stringify(error)}`\n          });\n        });\n  },\n\n  watch: {\n    isLoaded() {}\n  },\n\n  methods: {\n    getFilteredUsers(text) {\n      this.filteredUsers = this.users.filter(user => {\n        return (\n          (user.first_name + \" \" + user.last_name)\n            .toString()\n            .toLowerCase()\n            .indexOf(text.toLowerCase()) >= 0 ||\n          user.email\n            .toString()\n            .toLowerCase()\n            .indexOf(text.toLowerCase()) >= 0\n        );\n      });\n    },\n\n    enrollSelected() {\n      axios({\n        method: \"post\",\n        url: route(\"cohort.enroll\", { cohort: this.cohort_id }),\n        data: this.newUsers.map(user => user.id),\n        timeout: 90000\n      })\n        .then(response => {\n          this.enrolledUsers = this.enrolledUsers.concat(this.newUsers);\n          this.newUsers = [];\n        })\n        .catch(error => {\n          this.isSaving = false;\n          this.displayErrorNotification(error.response.data.message);\n          axios.post(\"/log\", {\n            error: `COHORT USER ENROLMENT ERROR\\n${platform.description}\\n${\n              error.name\n            }: ${error.message}\\nReply data: ${JSON.stringify(data)}\\n\\n`\n          });\n          this.errors = error.response.data.errors || \"\";\n        });\n    },\n\n    onUnenroll(user_id) {\n      axios({\n        method: \"get\",\n        url: route(\"cohort.unenroll\", {\n          cohort: this.cohort_id,\n          user: user_id\n        })\n      })\n        .then(response => {\n          setTimeout(() => {\n            this.isSaving = false;\n          }, 2000);\n          this.enrolledUsers = this.enrolledUsers.filter(\n            user => user.id != user_id\n          );\n        })\n        .catch(error => {\n          this.isSaving = false;\n          this.displayErrorNotification(error.response.data.message);\n          axios.post(\"/log\", {\n            error: `COHORT USER DELETE ERROR\\n${platform.description}\\n${\n              error.name\n            }: ${error.message}\\nReply data: ${JSON.stringify(data)}\\n\\n`\n          });\n          this.errors = error.response.data.errors || \"\";\n        });\n    },\n\n    displayErrorNotification(error) {\n      this.$buefy.snackbar.open({\n        message: `<b>Error:</b> ${error}`,\n        type: \"is-danger\",\n        position: \"is-bottom\",\n        duration: 5000\n      });\n    }\n  }\n};\n</script>\n\n<style></style>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CourseUsers.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CourseUsers.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CourseUsers.vue?vue&type=template&id=af94d0ec&\"\nimport script from \"./CourseUsers.vue?vue&type=script&lang=js&\"\nexport * from \"./CourseUsers.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"user-list\"},[(_vm.errorLoading)?_c('div',{staticClass:\"notification is-danger\"},[_vm._v(\"\\n    An error occured while trying to load users\\n  \")]):(_vm.isLoaded)?_c('div',[(_vm.users)?_c('b-field',{staticClass:\"mt-4 mb-4\"},[_c('b-taginput',{attrs:{\"open-on-focus\":true,\"data\":_vm.filteredUsers,\"ellipsis\":\"\",\"expanded\":\"\",\"autocomplete\":\"\",\"allow-new\":false,\"placeholder\":\"Add a person\",\"field\":\"first_name\"},on:{\"typing\":_vm.getFilteredUsers},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_c('div',[_vm._v(\"\\n            \"+_vm._s(props.option.first_name)+\" \"+_vm._s(props.option.last_name)+\"\\n          \")]),_vm._v(\" \"),_c('div',{staticClass:\"is-size-7\"},[_vm._v(_vm._s(props.option.email))])]}}],null,false,3669610502),model:{value:(_vm.newUsers),callback:function ($$v) {_vm.newUsers=$$v},expression:\"newUsers\"}}),_vm._v(\" \"),_c('p',{staticClass:\"control\"},[_c('b-button',{on:{\"click\":_vm.enrollSelected}},[_vm._v(\"Save\")])],1)],1):_vm._e(),_vm._v(\" \"),_vm._l((_vm.enrolledUsers),function(user){return _c('div',{key:user.id,staticClass:\"panel-block is-justify-between mb-4\"},[_c('div',[_c('p',[_vm._v(_vm._s(user.first_name)+\" \"+_vm._s(user.last_name))]),_vm._v(\" \"),_c('p',{staticClass:\"is-size-7\"},[_vm._v(_vm._s(user.email))])]),_vm._v(\" \"),_c('button',{staticClass:\"button is-small\",on:{\"click\":function($event){return _vm.onUnenroll(user.id)}}},[_vm._v(\"\\n        Unenroll\\n      \")])])})],2):_c('b-loading',{attrs:{\"is-full-page\":false,\"active\":!_vm.isLoaded}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <app-layout>\n    <div class=\"columns is-centered\">\n      <div class=\"column is-7-tablet is-6-desktop is-5-widescreen\">\n        <inertia-link\n          class=\"back-link has-text-dark\"\n          :href=\"\n            route('course.edit', { course: $page.props.parameters.course })\n          \"\n          >&larr; Back to course</inertia-link\n        >\n        <div class=\"box\">\n          <h3 class=\"title has-text-centered\">\n            {{ data ? \"Modifica\" : \"Creare\" }} classi\n            <span class=\"emoji\">✏️</span>\n          </h3>\n          <p class=\"subtitle has-text-centered\">\n            {{ data ? \"Edit the\" : \"Set up a new\" }} class below\n          </p>\n\n          <b-notification\n            v-if=\"errors.course\"\n            type=\"is-danger\"\n            has-icon\n            role=\"alert\"\n            :closable=\"false\"\n            :message=\"errors.course[0]\"\n          >\n          </b-notification>\n\n          <b-tabs>\n            <b-tab-item label=\"Overview\">\n              <b-field\n                label=\"Title\"\n                :message=\"errors.title\"\n                :type=\"errors.title ? 'is-danger' : null\"\n              >\n                <b-input\n                  required\n                  name=\"title\"\n                  v-model=\"form.title\"\n                  placeholder=\"Enter the name for this class\"\n                ></b-input>\n              </b-field>\n\n              <hr />\n\n              <b-checkbox v-model=\"form.enable_chatroom\"\n                >Enable chatroom?</b-checkbox\n              >\n              <p class=\"is-size-7 mb-2\">\n                When <strong>disabled</strong>, chatrooms will not be displayed\n                within this class.\n              </p>\n\n              <b-checkbox v-model=\"form.active\">Active?</b-checkbox>\n              <p class=\"is-size-7 mb-2\">\n                When <strong>enabled</strong>, this class will be listed in\n                students’ active classes and students will be able to post new\n                chatroom replies.<br />\n                When <strong>disabled</strong>, students will no longer be able\n                to post new chatroom replies. They will also lose access to\n                speaking club and companion classes, even if these options are\n                enabled below.\n              </p>\n\n              <b-checkbox v-model=\"form.enables_companion_courses\"\n                >Enables access to companion classes?</b-checkbox\n              >\n              <p class=\"is-size-7 mb-2\">\n                When <strong>enabled</strong>, students enrolled in this class\n                will be able to access companion classes while this class is\n                active.\n              </p>\n\n              <b-checkbox v-model=\"form.companion\">Companion class?</b-checkbox>\n              <p class=\"is-size-7 mb-2\">\n                When <strong>enabled</strong>, this class will be accessible by\n                all students enrolled in an active class that includes access to\n                companion courses.\n              </p>\n\n              <b-checkbox v-model=\"form.enables_speaking_club_access\"\n                >Includes access to speaking club?</b-checkbox\n              >\n              <p class=\"is-size-7 mb-2\">\n                When <strong>enabled</strong>, students enrolled on this class\n                will be able to access speaking club.\n                <em>This is only in effect while this class is active.</em>\n              </p>\n            </b-tab-item>\n            <b-tab-item v-if=\"$page.props.parameters.cohort\" label=\"Students\">\n              <course-users :cohort_id=\"$page.props.parameters.cohort\" />\n\n              <div class=\"notification has-background-light\">\n                <h3>Invite people</h3>\n                <p class=\"is-size-7\">\n                  Share the link below with people to invite them to this class.\n                  If they don’t already have an account they'll be prompted to\n                  create one.\n                </p>\n                <input\n                  id=\"course-invite-link\"\n                  class=\"input is-small\"\n                  type=\"text\"\n                  :value=\"\n                    route('cohort.enrollCurrentUser', { cohort: data.hash })\n                  \"\n                />\n              </div>\n            </b-tab-item>\n          </b-tabs>\n          <hr />\n          <b-button\n            type=\"is-primary\"\n            :disabled=\"!form.title\"\n            @click.prevent=\"onSubmit\"\n            :loading=\"form.processing\"\n            expanded\n            >{{ data ? \"Update\" : \"Create\" }}</b-button\n          >\n        </div>\n      </div>\n    </div>\n  </app-layout>\n</template>\n\n<script>\nimport TipTap from \"@/components/TipTap\";\nimport CourseUsers from \"@/components/CourseUsers\";\n\nexport default {\n  props: [\"errors\", \"data\"],\n  components: {\n    TipTap,\n    CourseUsers\n  },\n  data() {\n    return {\n      form: this.$inertia.form({\n        id: this.data?.id ?? null,\n        title: this.data?.title ?? null,\n        enable_chatroom: this.data?.enable_chatroom ?? false,\n        enables_companion_courses:\n          this.data?.enables_companion_courses ?? false,\n        active: this.data?.active ?? true,\n        companion: this.data?.companion ?? false,\n        enables_speaking_club_access:\n          this.data?.enables_speaking_club_access ?? false\n      })\n    };\n  },\n\n  mounted() {},\n\n  methods: {\n    onSubmit() {\n      let postRoute = this.data\n        ? route(\"cohort.update\", {\n            course: this.$page.props.parameters.course,\n            cohort: this.$page.props.parameters.cohort\n          })\n        : route(\"cohort.store\", {\n            course: this.$page.props.parameters.course\n          });\n\n      this.form\n        .transform(data => ({\n          ...data,\n          _method: this.data ? \"PUT\" : \"POST\"\n        }))\n        .post(postRoute, {\n          preserveScroll: true,\n          onSuccess: () => {\n            this.successToast(\"Class saved\");\n          },\n          onError: errors => {\n            this.errorToast(\"Check the form for errors\");\n          }\n        });\n    }\n  }\n};\n</script>\n\n<style></style>\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Form.vue?vue&type=template&id=6e5d71a8&\"\nimport script from \"./Form.vue?vue&type=script&lang=js&\"\nexport * from \"./Form.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}