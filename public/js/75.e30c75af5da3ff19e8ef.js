(self.webpackChunk=self.webpackChunk||[]).push([[75],{623:(n,e,t)=>{"use strict";t.d(e,{Z:()=>a});var s=t(4015),r=t.n(s),o=t(3645),i=t.n(o)()(r());i.push([n.id,".collapse{border-bottom:1px solid #ededed}","",{version:3,sources:["webpack://./resources/js/Pages/Admin/Course/Form.vue"],names:[],mappings:"AA4XA,UACE,+BA1XF",sourcesContent:['\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@import "../../../../sass/variables";\n\n.collapse {\n  border-bottom: 1px solid $grey-lightest;\n}\n'],sourceRoot:""}]);const a=i},3075:(n,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>p});function s(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,s)}return t}function r(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?s(Object(t),!0).forEach((function(e){o(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function o(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}const i={props:["errors","data"],components:{TipTap:t(2971).Z},data:function(){var n,e,t,s,r,o;return{form:this.$inertia.form({id:null!==(n=null===(e=this.data)||void 0===e?void 0:e.id)&&void 0!==n?n:null,title:null!==(t=null===(s=this.data)||void 0===s?void 0:s.title)&&void 0!==t?t:null,description:null!==(r=null===(o=this.data)||void 0===o?void 0:o.description)&&void 0!==r?r:null}),destroyWeekForm:this.$inertia.form(),destroyLessonForm:this.$inertia.form(),isOpen:null}},mounted:function(){},methods:{confirmLessonDelete:function(n,e){var t=this;this.$buefy.dialog.confirm({type:"is-danger",hasIcon:!0,title:"Confirm lesson deletion",message:"<strong>Are you sure you want to delete this lesson?</strong>",onConfirm:function(){return t.destroyLessonForm.transform((function(n){return{_method:"DELETE"}})).post(route("lesson.delete",{week:n,lesson:e,course:t.$page.props.parameters.course}),{preserveScroll:!0,onSuccess:function(){t.successToast("Week deleted")},onError:function(n){t.errorToast("Could not delete week.")}})}})},confirmWeekDelete:function(n){var e=this;this.$buefy.dialog.confirm({title:"Confirm week deletion",type:"is-danger",hasIcon:!0,message:"Are you sure you want to delete this week?<br> <strong>This will also delete any lessons within this week.</strong>",onConfirm:function(){return e.destroyWeekForm.delete(route("week.delete",{week:n,course:e.$page.props.parameters.course}),{preserveScroll:!0,onSuccess:function(){e.successToast("Week deleted")},onError:function(n){e.errorToast("Could not delete week.")}})}})},onSubmit:function(){var n=this,e=this.data?route("course.update",{course:this.$page.props.parameters.course}):route("course.create");this.form.transform((function(e){return r(r({},e),{},{course_id:n.$page.props.parameters.course,_method:n.data?"PUT":"POST"})})).post(e,{preserveScroll:!0,onSuccess:function(){n.successToast("Course saved")},onError:function(e){n.errorToast("Check the form for errors")}})}}};var a=t(3379),l=t.n(a),c=t(623),u={insert:"head",singleton:!1};l()(c.Z,u);c.Z.locals;const p=(0,t(1900).Z)(i,(function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("app-layout",[t("div",{staticClass:"columns is-centered"},[t("div",{staticClass:"column is-7-tablet is-6-desktop is-5-widescreen"},[t("inertia-link",{staticClass:"back-link has-text-dark",attrs:{href:n.route("courses.manage")}},[n._v("← Back to admin")]),n._v(" "),t("div",{staticClass:"box"},[t("h3",{staticClass:"title has-text-centered"},[n._v("\n          "+n._s(n.data?"Modifica":"Creare")+" corso\n          "),t("span",{staticClass:"emoji"},[n._v("✏️")])]),n._v(" "),t("p",{staticClass:"subtitle has-text-centered"},[n._v("\n          "+n._s(n.data?"Edit the":"Set up a new")+" course below\n        ")]),n._v(" "),n.errors.course?t("b-notification",{attrs:{type:"is-danger","has-icon":"",role:"alert",closable:!1,message:n.errors.course[0]}}):n._e(),n._v(" "),t("b-tabs",[t("b-tab-item",{attrs:{label:"Overview"}},[t("b-field",{attrs:{label:"Title",message:n.errors.title,type:n.errors.title?"is-danger":null}},[t("b-input",{attrs:{required:"",name:"title",placeholder:"Enter the title for this course"},model:{value:n.form.title,callback:function(e){n.$set(n.form,"title",e)},expression:"form.title"}})],1),n._v(" "),t("b-field",{attrs:{label:"Description",message:n.errors.description,type:n.errors.description?"is-danger":null}},[t("tip-tap",{model:{value:n.form.description,callback:function(e){n.$set(n.form,"description",e)},expression:"form.description"}})],1),n._v(" "),t("br")],1),n._v(" "),n.$page.props.parameters.course?t("b-tab-item",{attrs:{label:"Classes"}},[t("nav",{staticClass:"mb-6"},[t("div",{staticClass:"is-flex is-justify-content-space-between is-align-items-center mb-2"},[t("h3",{staticClass:"label"},[n._v("Classes")]),n._v(" "),t("inertia-link",{staticClass:"button is-primary is-small",attrs:{href:n.route("cohort.create",{course:n.$page.props.parameters.course})}},[n._v("\n                  Add a new class")])],1)]),n._v(" "),n._l(n.data.cohorts,(function(e){return t("div",{key:e.id,staticClass:"panel-block is-justify-between mb-4"},[t("div",[t("p",[n._v(n._s(e.title))])]),n._v(" "),t("inertia-link",{staticClass:"button is-small",attrs:{href:n.route("cohort.edit",{course:e.course_id,cohort:e.id})}},[n._v("Edit")])],1)}))],2):n._e(),n._v(" "),n.$page.props.parameters.course?t("b-tab-item",{attrs:{label:"Lessons"}},[t("div",{staticClass:"is-flex is-justify-content-space-between is-align-items-center mb-2"},[t("h3",{staticClass:"label"},[n._v("Lessons")]),n._v(" "),t("inertia-link",{staticClass:"button is-primary is-small",attrs:{href:n.route("week.create",{course:n.$page.props.parameters.course})}},[n._v("\n                Add a new week")])],1),n._v(" "),t("nav",{staticClass:"mb-6"},[n._l(n.data.weeks,(function(e,s){return t("b-collapse",{key:s,staticClass:"collapse",attrs:{animation:"slide",open:n.isOpen==s},on:{open:function(e){n.isOpen=s}},scopedSlots:n._u([{key:"trigger",fn:function(s){return[t("div",{staticClass:"is-radius is-size-6 p-2 pl-2 is-align-items-center is-flex",class:s.open?"has-background-success":"",attrs:{role:"button"}},[t("b-icon",{staticClass:"mr-2",attrs:{icon:s.open?"chevron-down":"chevron-right"}}),n._v(" "),t("span",{staticClass:"text-overflow-ellipsis mr-2"},[n._v(n._s(e.name))]),n._v(" "),t("span",{staticClass:"is-size-7 ml-2 mr-2 has-text-weight-normal"},[n._v("\n                      "+n._s(e.lessons.length||"No")+" lessons\n                    ")]),n._v(" "),t("div",{staticClass:"ml-a has-text-weight-normal"},[t("inertia-link",{staticClass:"button is-small is-outlined",attrs:{href:n.route("lesson.create",{course:n.$page.props.parameters.course,week:e.number})},on:{click:function(n){n.stopPropagation()}}},[n._v("Add lesson")]),n._v(" "),t("b-dropdown",{attrs:{position:"is-bottom-left","append-to-body":"","aria-role":"menu"},nativeOn:{click:function(n){n.stopPropagation()}},scopedSlots:n._u([{key:"trigger",fn:function(){return[t("b-button",{staticClass:"is-small",attrs:{"icon-left":"settings"}})]},proxy:!0}],null,!0)},[n._v(" "),t("b-dropdown-item",{attrs:{"has-link":"","aria-role":"menuitem"}},[t("inertia-link",{attrs:{href:n.route("week.edit",{course:n.$page.props.parameters.course,week:e.number})},on:{click:function(n){n.stopPropagation()}}},[n._v("Edit")])],1),n._v(" "),t("b-dropdown-item",{attrs:{"has-link":"","aria-role":"menuitem"}},[t("a",{attrs:{href:"#",role:"button"},on:{click:function(t){return t.stopPropagation(),n.confirmWeekDelete(e.number)}}},[n._v("Delete")])])],1)],1)],1)]}}],null,!0)},[n._v(" "),e.lessons.length?n._e():t("div",{staticClass:"notification has-background-white mb-0 is-size-7 has-text-centered"},[n._v("\n                  No lessons in this week.\n                  "),t("inertia-link",{attrs:{href:n.route("lesson.create",{course:n.$page.props.parameters.course,week:e.number})}},[n._v("Add the first")]),n._v(".\n                ")],1),n._v(" "),n._l(e.lessons,(function(s){return t("div",{key:s.id,staticClass:"panel-block pl-6 has-background-white-bis is-justify-between"},[t("span",{staticClass:"text-overflow-ellipsis is-size-6"},[n._v(n._s(s.title))]),n._v(" "),t("div",{staticClass:"is-size-6 ml-2"},[t("inertia-link",{staticClass:"button has-text-grey is-small",attrs:{href:n.route("lesson.edit",{course:n.$page.props.parameters.course,week:e.number,lesson:s.id})}},[n._v("Edit")]),n._v(" "),t("button",{staticClass:"button has-text-grey is-small",on:{click:function(t){return n.confirmLessonDelete(e.number,s.id)}}},[n._v("\n                      Delete\n                    ")])],1)])}))],2)})),n._v(" "),n.data.weeks?n._e():t("section",{staticClass:"section is-medium has-background-light has-text-centered"},[n._v("\n                Start by\n                "),t("inertia-link",{attrs:{href:n.route("week.create",{course:n.$page.props.parameters.course})}},[n._v("adding a week")]),n._v(". Once you’ve added a week, you can then add lessons to it.\n              ")],1)],2)]):n._e()],1),n._v(" "),t("hr"),n._v(" "),t("b-button",{attrs:{type:"is-primary",disabled:!n.form.title,loading:n.form.processing,expanded:""},on:{click:function(e){return e.preventDefault(),n.onSubmit(e)}}},[n._v(n._s(n.data?"Update":"Create"))])],1)],1)])])}),[],!1,null,null,null).exports}}]);
//# sourceMappingURL=75.e30c75af5da3ff19e8ef.js.map